13 个 你不得不知道的 npm 快速开发技巧
https://mp.weixin.qq.com/s/wp2dgzHRyjOnqqSQh7CICQ

## 简写

| 命令            | 简写 |                      |
| --------------- | ---- | -------------------- |
| install         | i    |                      |
| test            | t    |                      |
| --help          | -h   |                      |
| --global        | -g   |                      |
| -save-dev       | -D   | 开发依赖             |
| --yes           | -y   |                      |
| --force         | -f   |                      |
| -save           | -S   |                      |
| -no-save        |      | 临时安装，不保存     |
| --save-optional | -O   | 精确安装指定模块版本 |
| `.`             |      | 根目录快捷方式       |

## 根目录快捷

```shell
# 运行项目 - 表示运行 package.json 'main'对应文件
npx create-react-app .
# 创建 my-app 项目
npx create-react-app my-app 
```

## 脚本跨平台兼容

**任何在命令行上运行的代码都有兼容性问题**，特别是在Windows和基于unix的系统(包括Mac和Linux)之间。

`npm i -D cross-env`

```shell
{
  "scripts": {
    "build": "cross-env NODE_ENV=production webpack --config build/wepack.config.js"
  }
}
```

## 并行运行脚本

### & - 默认

```shell
command1 arg & command2 arg
```

### concurrent - 三方库

`npm i -D concurrently`

```json
{
  "start": "concurrently \"command1 arg\" \"command2 arg\""
}
```

## 不同的目录中运行脚本

手动 cd 并运行对应的命令

```shell
cd folder && npm start && cd ..
```

使用--prefix标志指定路径

```shell
npm start --prefix path/to/your/folder
```

分别在 `client 、server` 中 运行 npm start

```js
"start": "concurrently \"(npm start --prefix client)\" \"(npm start --prefix server)\"",
```

## 延迟运行脚本

同时启动服务器和客户端。

- BROWSER=none，禁用默认打开浏览器窗口的行为。
- wait-on，等待 3000 端口启动，向下运行

```shell
"dev": "concurrently \"cross-env BROWSER=none npm run start\" \"wait-on http://localhost:3000 && electron .\"",
```

> react默认打开一个浏览器窗口，但对 Electron 来说，不必要。

## 列出并选择可用脚本

默认：项目根目录终端中输入`npm run`

三方库：全局安装 NTL (npm任务列表)模块

```shell
# 安装 ntl
npm i -g ntl
# 运行 ntl
ntl
```



项目文件夹中运行ntl命令，可以获得一个可用脚本列表，并可以选择其中一个运行
null
运行前后脚本
prebuild和postbuild这样的脚本，它们允许你定义在构建脚本之前或之后运行的代码。
null
控制应用程序版本
手动更改应用程序的版本相比，npm 提供了一些有用的快捷方式来完成这一点
null

// 1.0.0
npm version patch
// 1.0.1
npm version minor
// 1.1.0
npm version major
// 2.0.0
根据更新应用程序的频率，可以通过在每次部署时增加版本号来节省时间

{
  "predeploy": "npm version patch"
}
从命令行编辑 package.json
null
使用工具库json从命令行进行编辑

npm install -g json
 自动设置和打开你的github库
package.json文件中有“repository”，则可以通过输入 npm repo在默认浏览器中打开它
找到你的连接存储库
git config --get remote.origin.url
null
安装了json模块，可以使用下面的脚本自动将正确的存储库添加到 package.json

json -I -f package.json -e "this.repository=\"$(git config --get remote.origin.url)\""

‌自定义npm init脚本

‌使用自定义npm init脚本将你的第一个 Commit 提交到 GitHub